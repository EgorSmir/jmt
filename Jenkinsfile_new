node {
   try{
      stage('Build') {
         sh "echo Hello from main NEW test!"
      }
      setBuildStatus("Build complete", "SUCCESS");
   } catch (err) {
        setBuildStatus("Build complete", "FAILURE");
        throw err
   }

   void setBuildStatus(String message, String state) {
     step([
         $class: "GitHubCommitStatusSetter",
         contextSource: [$class: "ManuallyEnteredCommitContextSource", context: "ci/jenkins/build-status/test_new"],
         statusResultSource: [ $class: "ConditionalStatusResultSource", results: [[$class: "AnyBuildResult", message: message, state: state]] ]
     ]);
}
